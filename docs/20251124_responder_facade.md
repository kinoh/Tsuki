- Added a `UserContext` facade interface to expose only per-user state needed for response generation (thread lookup, memory load, toolsets, runtime context accessor).
- Added a `Responder` interface and `MastraResponder` implementation that own Mastra agent + usage storage while depending on the `UserContext` facade for per-user inputs.
- Updated `ActiveUser` to implement `UserContext` and delegate response generation (including scheduler notifications) to `MastraResponder`, keeping channel management/notification subscription in `ActiveUser` and agent invocation/usage logging inside the responder.
- Extended WebSocket payload handling to accept structured `{ type: 'message', text?, images[] }` JSON; `MessageInput` now carries `text` and optional base64 images, and `MastraResponder` maps them to Mastra `CoreUserMessage` parts for multimodal requests.
